{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/page/home.vue?d823","webpack:///./src/components/ocean/OceanCanvas.vue?31bd","webpack:///./src/components/page/poem.vue?4afd","webpack:///./src/App.vue?e54e","webpack:///./src/components/ocean/OceanCanvas.vue?b5be","webpack:///./src/components/ocean/OceanShader.js","webpack:///./src/components/ocean/OceanSpot.js","webpack:///src/components/ocean/OceanCanvas.vue","webpack:///./src/components/ocean/OceanCanvas.vue?4042","webpack:///./src/components/ocean/OceanCanvas.vue","webpack:///./src/components/poem/PoemCanvas.vue?b5d3","webpack:///./src/components/poem/PoemChar.js","webpack:///src/components/poem/PoemCanvas.vue","webpack:///./src/components/poem/PoemCanvas.vue?82d9","webpack:///./src/components/poem/PoemCanvas.vue","webpack:///src/App.vue","webpack:///./src/App.vue?1160","webpack:///./src/App.vue","webpack:///./src/components/page/home.vue?4f78","webpack:///./src/components/wavecanvas/WaveCurtain.vue?d87a","webpack:///./src/components/wavecanvas/WaveShader.js","webpack:///src/components/wavecanvas/WaveCurtain.vue","webpack:///./src/components/wavecanvas/WaveCurtain.vue?e6ac","webpack:///./src/components/wavecanvas/WaveCurtain.vue","webpack:///src/components/page/home.vue","webpack:///./src/components/page/home.vue?b8fa","webpack:///./src/components/page/home.vue","webpack:///./src/components/page/map.vue?f4fe","webpack:///./src/components/ocean/OceanItem.vue?a4cf","webpack:///src/components/ocean/OceanItem.vue","webpack:///./src/components/ocean/OceanItem.vue?0bac","webpack:///./src/components/ocean/OceanItem.vue","webpack:///src/components/page/map.vue","webpack:///./src/components/page/map.vue?d6f9","webpack:///./src/components/page/map.vue","webpack:///./src/components/page/poem.vue?15af","webpack:///src/components/page/poem.vue","webpack:///./src/components/page/poem.vue?febe","webpack:///./src/components/page/poem.vue","webpack:///./src/router.js","webpack:///./src/store.js","webpack:///./src/main.js","webpack:///./src/App.vue?c650","webpack:///./src/components/wavecanvas/WaveCurtain.vue?a781","webpack:///./src/components/poem/PoemCanvas.vue?5fcd","webpack:///./src/components/ocean/OceanItem.vue?c67c","webpack:///./src/components/page/map.vue?0732"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","ref","staticRenderFns","NUM_METABALLS","NUM_METABALLS_TW","IslandPortion","vs","fs","fs_tw","RADIUS_PORTION","MOVE_INTERVAL","MAX_RAD","MIN_RAD","OceanSpot","WIDTH","HEIGHT","width","height","radius","randomRadius","x","Math","random","y","tween","setDest","stage","is_tw","isActive","atDest","destx","desty","interval","rad_portion","delay","undefined","rad","min","max","kill","TweenMax","to","overwrite","ease","Sine","easeInOut","portion","component","FONT_SIZE","LINE_HEIGHT","TEXT_WIDTH","START_Z","PoemChar","text","destz","color","repeat","createObject","canvas","document","createElement","context","getContext","fillStyle","textAlign","textBaseline","font","drawText","texture","THREE","needsUpdate","material","map","fog","depthWrite","sprite","textObject","textHeight","textWidth","scale","set","add","clearRect","fillText","position","z","pause","restart","fadeIn","set_","opacity","sound_bgm","sound_processing","sound_fadein","sound_finish","components","OceanCanvas","PoemCanvas","created","$store","dispatch","loadSound","methods","setStage","on","startClick","id","img_src","_l","item","nativeOn","$event","writePoem","index","style","_v","_s","ocean","props","computed","rewriteClick","homeClick","_e","Vue","use","VueRouter","router","routes","path","Home","Map","Poem","PoemURL","IslandDataURL","DummyCharURL","PagePadding","shuffleArray","array","floor","Vuex","VueAxios","axios","resize_timeout","store","Store","state","location","poem","generating","island","screenWidth","documentElement","clientWidth","screenHeight","clientHeight","pageWidth","pageHeight","maskRegion","pagePadding","dummyChar","mutations","setWeatherText","setLocation","loc","setPoem","str_","replace","concat","poem_","split","filter","el","tmp_","setGenerating","clearPoem","setOceanData","info","setIslandData","setDummyChar","setPageSize","getElementsByClassName","console","log","mw","mx","my","w","actions","generatePoem","commit","weather_text","post","then","res","catch","error","fetchIslandData","h","main","err","fetchDummyChar","computePageSize","getters","getWeatherText","getPoem","getOceanPosition","px","py","getOceanPositionCanvas","getIslandPositionCanvas","getDummyChar","getMaskRegion","config","productionTip","render","App","mounted","_this","onresize","clearTimeout","setTimeout","doResize","$mount"],"mappings":"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","file":"js/app.a71a32f2.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./home.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./home.vue?vue&type=style&index=0&lang=scss&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OceanCanvas.vue?vue&type=style&index=0&id=26b65543&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OceanCanvas.vue?vue&type=style&index=0&id=26b65543&lang=scss&scoped=true&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./poem.vue?vue&type=style&index=0&id=d52683a0&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./poem.vue?vue&type=style&index=0&id=d52683a0&scoped=true&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"FullScreen\",attrs:{\"id\":\"app\"}},[_c('ocean-canvas',{ref:\"_ocean_canvas\"}),_c('PoemCanvas',{ref:\"_poem_canvas\"}),_c('div',{staticClass:\"CenterWrapper\",attrs:{\"id\":\"_page\"}},[_c('div',{staticClass:\"MainScreen\"},[_c('transition',{attrs:{\"name\":\"page-fade\"}},[_c('keep-alive',[_c('router-view',{staticClass:\"MainPage\"})],1)],1)],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"_ocean_container\"}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export const NUM_METABALLS=22;\nexport const NUM_METABALLS_TW=5;\n\nexport const IslandPortion=0.85;\nexport const IslandCenter=0.55;\n\nexport const vs=`\n    varying vec2 vUv;\n    void main(){\n        vUv = uv;\n        vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * mvPosition;\n\n    }`;\n\nexport const fs=`\n    precision highp float;\n    uniform vec3 metaballs[` + NUM_METABALLS + `];\n    uniform vec3 ocean_color[4];\n    uniform float tt;\n    uniform float width;\n    uniform float height;\n    uniform float layer;\n    uniform float roi_pos_x;\n    uniform float roi_pos_y;\n    uniform float roi_size_x;\n    uniform float roi_size_y;\n    varying vec2 vUv;\n    const vec3 BORDER_COLOR=vec3(0.02,0.22,0.48);\n    float rand(float n){return fract(sin(n) * 43758.5453123);}\n    float rand(vec2 n) { \n        return fract(sin(dot(n, vec2(12.9898, 4.1414))) * 43758.5453);\n    }\n    float noise(float p){\n        float fl = floor(p);\n        float fc = fract(p);\n        return mix(rand(fl), rand(fl + 1.0), fc);\n    }\n    float noise(vec2 n) {\n        const vec2 d = vec2(0.0, 1.0);\n        vec2 b = floor(n), f = smoothstep(vec2(0.0), vec2(1.0), fract(n));\n        return mix(mix(rand(b), rand(b + d.yx), f.x), mix(rand(b + d.xy), rand(b + d.yy), f.x), f.y);\n    }\n    vec2 mapCoord(vec2 p){\n        float ratio=width/height;\n        float rx=(p.x-.5)*ratio*roi_size_x+((roi_pos_x-.5)*ratio+.5);\n        float ry=-(p.y-.5)*roi_size_y+roi_pos_y;\n\n        return vec2(rx,ry);\n    }\n    void main(){\n        float ratio=width/height;\n        vec2 p=mapCoord(vUv.xy);\n        float x=p.x;\n        float y=p.y;\n        \n        float mx=x*ratio;\n        float my=y;\n        \n        float curve=20.0+layer*2.0;\n        \n        float v = 0.0;\n        float d=0.0;\n        for (int i = 0; i < ` + NUM_METABALLS + `; i++) {\n            vec3 mb = metaballs[i];\n            float dx = ((mb.x-.5)*ratio+.5) - x;\n            float dy = mb.y - y;\n            float r = mb.z;\n            v += r*r/(dx*dx + dy*dy);\n            // v += r*r/(dx*dx + dy*dy);\n            // d+=1.0/(dx*dx+dy*dy);\n\n            // if(mod(sqrt(d)*width,1.0)<0.01){\n            //     gl_FragColor=vec4(BORDER_COLOR,1.0);\n            //     return;\n            // }\n        }\n        v=v*(noise(vec2(x*ratio*curve+tt,y*curve+tt))*.5+.5);\n        // d=d*noise(vec2(x*ratio*curve+tt,y*curve+tt)*.5+.5);\n        if(mod(sqrt(v)*width,0.5)<0.01) gl_FragColor=vec4(BORDER_COLOR,1.0);\n        else{\n            // if (v > 1.0) {\n                float step=v;\n                float pp=step-floor(step);\n                pp=1.0;//-pp;\n                if(step>=layer*2.5) gl_FragColor = vec4(ocean_color[0], 1.0);\n                else if(step>=layer*2.0) gl_FragColor = vec4(mix(ocean_color[0],ocean_color[1],pp), 1.0);\n                else if(step>=layer*1.5) gl_FragColor = vec4(mix(ocean_color[1],ocean_color[2],pp),1.0);\n                else if(step>=layer){\n                    gl_FragColor = vec4(mix(ocean_color[2],ocean_color[3],pp), 1.0);  \n                }else{\n                    gl_FragColor = vec4(ocean_color[3], 0.0);\n                }\n        }\n    }\n    `;\nexport const fs_tw=`\n    precision highp float;\n    uniform vec3 metaballs[` + NUM_METABALLS_TW + `];\n    uniform vec3 ocean_color[4];\n    uniform float tt;\n    uniform sampler2D mask;\n    uniform float width;\n    uniform float height;\n    varying vec2 vUv;\n    uniform vec3 ISLAND_COLOR[4];\n    // uniform float ISLAND_PORTION;\n    // uniform float ISLAND_CENTER;\n    uniform vec4 mask_region;\n    uniform float roi_pos_x;\n    uniform float roi_pos_y;\n    uniform float roi_size_x;\n    uniform float roi_size_y;\n    float rand(float n){return fract(sin(n) * 43758.5453123);}\n    float rand(vec2 n) { \n        return fract(sin(dot(n, vec2(12.9898, 4.1414))) * 43758.5453);\n    }\n    float noise(float p){\n        float fl = floor(p);\n        float fc = fract(p);\n        return mix(rand(fl), rand(fl + 1.0), fc);\n    }\n    float noise(vec2 n) {\n        const vec2 d = vec2(0.0, 1.0);\n        vec2 b = floor(n), f = smoothstep(vec2(0.0), vec2(1.0), fract(n));\n        return mix(mix(rand(b), rand(b + d.yx), f.x), mix(rand(b + d.xy), rand(b + d.yy), f.x), f.y);\n    }\n    bool inMask(vec2 p){\n        \n        // if(p.y>ISLAND_CENTER+ISLAND_PORTION || p.y<ISLAND_CENTER-ISLAND_PORTION) return false;\n\n        // float ratio=width/height;\n        // float my=(p.y-ISLAND_CENTER)*1.0/ISLAND_PORTION/2.0+.5;\n        \n        // float mx=(p.x-.5)*1.0/ISLAND_PORTION/2.0+.5;\n\n        if(p.x<mask_region[0] || p.y<mask_region[1] \n            || p.x>mask_region[0]+mask_region[2] || p.y>mask_region[1]+mask_region[3]) return false;\n\n        float mx=(p.x-mask_region[0])/mask_region[2];\n        float my=(p.y-mask_region[1])/mask_region[3];\n        \n        vec4 mask_=texture2D(mask,vec2(mx,1.0-my));\n        bool in_mask=(length(mask_.rgb)>1.0);\n        \n        return in_mask;\n        // return true;\n    }\n     vec2 mapCoord(vec2 p){\n        float ratio=width/height;\n        float rx=(p.x-.5)*roi_size_x+((roi_pos_x-.5)*ratio+.5);\n        float ry=-(p.y-.5)*roi_size_y+roi_pos_y;\n        // ry=1.0-ry;\n\n        return vec2(rx,ry);\n    }\n    void main(){\n        float ratio=width/height;\n        vec2 p=mapCoord(vUv.xy);\n        float x=p.x;\n        float y=p.y;\n        \n        // float mx=(vUv.x-.5)*ratio+.5;\n        // float my=vUv.y;\n        float v = 0.0;\n        float d=0.0;\n        for (int i = 0; i < ` + NUM_METABALLS_TW + `; i++) {\n            vec3 mb = metaballs[i];\n            float dx = mb.x - x;\n            float dy = mb.y - y;\n            float r = mb.z;\n            v += r*r/(dx*dx + dy*dy);\n            d+=sqrt(r*r/(dx*dx + dy*dy));\n        }\n        v=v*(noise(vec2(x*ratio*20.0+tt,y*20.0+tt))*.5+.5);\n        bool in_mask=inMask(p);\n        vec4 tmp=vec4(ocean_color[3],.2);\n        vec4 dest=vec4(mix(ISLAND_COLOR[2],ISLAND_COLOR[3],y),tt);\n        if(v > 1.0){\n            tmp=vec4(ocean_color[3], .2);\n            float step=floor(v/4.0);\n            float pp=1.0;\n            if(step>=6.0) tmp =vec4(ocean_color[0], 1.0);\n            else if(step>=5.0) tmp =vec4(ocean_color[1], 1.0);\n            else if(step>=4.0) tmp =vec4(ocean_color[2], 1.0);\n\n            // if(tt>0.0 && !in_mask) tmp=vec4(ocean_color[3],.2);\n        }\n        if(in_mask){\n            dest=vec4(mix(ISLAND_COLOR[0],ISLAND_COLOR[1],y),1.0);\n        }\n        float t=.0;\n        if(tt<.5) t=.0;\n        else t=(tt-.5)*2.0;\n        gl_FragColor=vec4(mix(tmp,dest,t));\n    }\n    `;","import {TweenMax,Sine} from 'gsap';\n\nconst RADIUS_PORTION=0.8;\n// const SPOT_VEL=5;\n// const DEST_TOLERANCE=20;\nexport const MOVE_INTERVAL=5000;\n// const MAX_VEL=28.0;\nconst MAX_RAD=300;\nconst MIN_RAD=10;\n\nexport default class OceanSpot{\n\tconstructor(WIDTH,HEIGHT){\n\n\t\tthis.width=WIDTH;\n\t\tthis.height=HEIGHT;\n\t\tvar radius=this.randomRadius(RADIUS_PORTION);\n\t\t\n\t\t\n\t\tthis.x=Math.random() * (WIDTH +radius) - radius;\n\t\tthis.y=Math.random() * (HEIGHT +radius) - radius;\n\t\tthis.r=radius;\n\n\n\t\tthis.tween;\n\t\tthis.setDest();\n\n\t\tthis.stage='floating'; // floating, island, poem\n\t\tthis.is_tw=false;\n\t}\n\tatDest(){\n\t\treturn !this.tween.isActive();\n\t}\n\tstep(){\n\t\n\t\tif(this.atDest()){\n\t\t\tif(this.stage===\"floating\"){\n\t\t\t\t// console.log('float');\n\t\t\t\t// if(Math.random()*200<1){\n\t\t\t\t\tthis.setDest();\n\t\t\t\t// }\n\t\t\t}\t\t\t\n\t\t}\n\t}\n\tsetDest(destx,desty,interval,rad_portion){\n\n\t\tlet delay=0;\n\t\tif(interval===undefined){\n\t\t\tinterval=MOVE_INTERVAL*(Math.random()*1.0+1.0);\n\t\t\tdelay=interval*Math.random()*.5/1000.0;\t\n\t\t} \n\t\tif(rad_portion===undefined) rad_portion=RADIUS_PORTION;\n\n\t\tvar rad=this.randomRadius(rad_portion);\n\n\t\tif(destx===undefined) destx=Math.random()*(this.width +this.r) - this.r;\n\t\tif(desty===undefined) desty=Math.random()*(this.height +this.r) - this.r;\n\t\t// console.log('set dest= '+destx+\" , \"+desty);\n\n\t\tdestx=Math.min(Math.max(destx,0),this.width);\n\t\tdesty=Math.min(Math.max(desty,0),this.height);\n\t\t\n\t\tif(this.tween) this.tween.kill();\n\t\tthis.tween=TweenMax.to(this,interval/1000,{\n\t\t\tx:destx,\n\t\t\ty:desty,\n\t\t\tr:rad,\n\t\t\toverwrite:'all',\n\t\t\tease:Sine.easeInOut,\n\t\t\tdelay:delay,\n\t\t\t// onComplete:function(){\n\t\t\t// \tconsole.log('complete!');\n\t\t\t// }\n\t\t});\t\n\t\t\n\t}\n\trandomRadius(portion){\n\t\tvar r=(Math.random()*.5+.5)*Math.min(this.width,this.height)*portion;\n\t\treturn Math.min(Math.max(r,MIN_RAD),MAX_RAD);\n\t}\n}","<template>\n\t<div id=\"_ocean_container\"></div>\t\n</template>\n\n\n<script type=\"text/javascript\">\nimport * as THREE from 'three';\nimport {vs,fs,fs_tw,NUM_METABALLS,NUM_METABALLS_TW} from './OceanShader.js';\nimport OceanSpot from './OceanSpot.js';\nimport {TweenMax,Expo} from 'gsap';\n\nconst TRANSITON_INTERVAL=3000;\n// import OceanShader from './OceanShader';\n\nexport default{\n\tname:'ocean-canvas',\n\tdata(){\n\t\treturn{\n\t\t\tcamera:null,\n\t\t\tscene:null,\n\t\t\trenderer:null,\n\t\t\tmesh_ocean:null,\n\t\t\tmesh_taiwan:null,\n\t\t\twidth:this.$store.state.screenWidth,\n\t\t\theight:this.$store.state.screenHeight,\n\t\t\tspots:[],\n\t\t\tmaterial_ocean:null,\n\t\t\tmaterial_taiwan:null,\n\t\t\tstage:'floating',\n\t\t}\n\t},\n\twatch:{\n\t\t'$store.state.screenWidth':function(val){\n\t\t\tthis.width=val;\n\t\t\tthis.resize();\n\t\t},\n\t\t'$store.state.screenHeight':function(val){\n\t\t\tthis.height=val;\n\t\t\tthis.resize();\n\t\t}\n\t},\n\tmethods:{\n\t\tinit:function(){\n\t\t\tvar container = document.getElementById('_ocean_container');\n\t\t\tthis.camera = new THREE.PerspectiveCamera(70, container.clientWidth/container.clientHeight, 0.01, 10);\n\t\t\tthis.camera.position.z = 1;\n\n\t\t\tthis.scene = new THREE.Scene();\n\n\t\t\tvar aspect = container.clientWidth/container.clientHeight;\n\t\t\tvar vFov = this.camera.fov * Math.PI / 180;\n\t\t\tvar planeHeight = 2 * Math.tan(vFov / 2);\n\t\t\tvar planeWidth = planeHeight * aspect;\n\t\t\tvar geometry =new THREE.PlaneBufferGeometry(planeWidth,planeHeight,1,1);\n\t\t\t// var material = new THREE.MeshNormalMaterial();\n\n\n\n\t\t\tfor(var i=0;i<NUM_METABALLS;++i){\n\t\t\t\tlet spot=new OceanSpot(this.width,this.height);\n\t\t\t\tif(i<NUM_METABALLS_TW) \n\t\t\t\t\tspot.is_tw=true;\n\t\t\t\tthis.spots.push(spot);\n\n\t\t\t}\n\n\t\t\tthis.material_ocean=new THREE.ShaderMaterial({\n\t\t\t\tuniforms:{\n\t\t\t\t\tocean_color:{\n\t\t\t\t\t\tvalue:new Float32Array([\n\t\t\t\t\t\t\t\t\t0.0,0.375,0.62,\n\t\t\t\t\t\t\t\t\t0.08,0.375,0.65,\n\t\t\t\t\t\t\t\t\t0.16,0.52,0.68,\n\t\t\t\t\t\t\t\t\t0.25,0.59,0.72])\n\t\t\t\t\t},\n\t\t\t\t\tmetaballs:{\n\t\t\t\t\t\tvalue:new Float32Array(3*NUM_METABALLS)\n\t\t\t\t\t},\n\t\t\t\t\ttt:{\n\t\t\t\t\t\tvalue:0\n\t\t\t\t\t},\n\t\t\t\t\twidth:{\n\t\t\t\t\t\tvalue:planeWidth\n\t\t\t\t\t},\n\t\t\t\t\theight:{\n\t\t\t\t\t\tvalue:planeHeight\n\t\t\t\t\t},\n\t\t\t\t\tlayer:{\n\t\t\t\t\t\tvalue:5.0\n\t\t\t\t\t},\n\t\t\t\t\troi_pos_x:{\n\t\t\t\t\t\tvalue:.5,\n\t\t\t\t\t},\n\t\t\t\t\troi_pos_y:{\n\t\t\t\t\t\tvalue:.5,\n\t\t\t\t\t},\n\t\t\t\t\troi_size_x:{\n\t\t\t\t\t\tvalue:1,\t\n\t\t\t\t\t},\n\t\t\t\t\troi_size_y:{\n\t\t\t\t\t\tvalue:1,\t\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\ttransparent: true,\n\t\t\t\tvertexShader:vs,\n\t\t\t\tfragmentShader:fs\n\t\t\t});\n\n\n\t\t\tlet mask_region=this.$store.getters.getMaskRegion;\n\t\t\t// console.log(mask_region);\n\n\t\t\tthis.material_taiwan=new THREE.ShaderMaterial({\n\t\t\t\tuniforms:{\n\t\t\t\t\tmask:{\n\t\t\t\t\t\ttype:\"t\",\n\t\t\t\t\t\tvalue:new THREE.TextureLoader().load(\"img/taiwan_mask.png\")\n\t\t\t\t\t},\n\t\t\t\t\tocean_color:{\n\t\t\t\t\t\tvalue:new Float32Array([\n\t\t\t\t\t\t\t\t\t0.0,0.375,0.62,\n\t\t\t\t\t\t\t\t\t0.08,0.375,0.65,\n\t\t\t\t\t\t\t\t\t0.16,0.52,0.68,\n\t\t\t\t\t\t\t\t\t0.25,0.59,0.72])\n\t\t\t\t\t},\n\t\t\t\t\tmetaballs:{\n\t\t\t\t\t\tvalue:new Float32Array(3*NUM_METABALLS)\n\t\t\t\t\t},\n\t\t\t\t\ttt:{\n\t\t\t\t\t\tvalue:0\n\t\t\t\t\t},\n\t\t\t\t\twidth:{\n\t\t\t\t\t\tvalue:planeWidth\n\t\t\t\t\t},\n\t\t\t\t\theight:{\n\t\t\t\t\t\tvalue:planeHeight\n\t\t\t\t\t},\n\t\t\t\t\tISLAND_COLOR:{\n\t\t\t\t\t\tvalue:new Float32Array([55/256,186/256,184/256,\n\t\t\t\t\t\t\t\t\t\t\t\t43/256,121/256,180/256,\n\t\t\t\t\t\t\t\t\t\t\t\t19/256,160/256,182/256,\n\t\t\t\t\t\t\t\t\t\t\t\t18/256,86/256,142/256]),\n\t\t\t\t\t},\n\t\t\t\t\tmask_region:{\n\t\t\t\t\t\tvalue:new Float32Array([mask_region.x/this.width,\n\t\t\t\t\t\t\t\t\t\t\t\tmask_region.y/this.height,\n\t\t\t\t\t\t\t\t\t\t\t\tmask_region.w/this.width,\n\t\t\t\t\t\t\t\t\t\t\t\tmask_region.w/this.height]),\n\t\t\t\t\t},\n\t\t\t\t\troi_pos_x:{\n\t\t\t\t\t\tvalue:.5,\n\t\t\t\t\t},\n\t\t\t\t\troi_pos_y:{\n\t\t\t\t\t\tvalue:.5,\n\t\t\t\t\t},\n\t\t\t\t\troi_size_x:{\n\t\t\t\t\t\tvalue:1,\t\n\t\t\t\t\t},\n\t\t\t\t\troi_size_y:{\n\t\t\t\t\t\tvalue:1,\t\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\ttransparent: true,\n\t\t\t\tvertexShader:vs,\n\t\t\t\tfragmentShader:fs_tw\n\t\t\t});\n\n\t\t\t// console.log(this.material_taiwan.uniforms.mask_region.value);\n\n\t\t\tthis.mesh_ocean = new THREE.Mesh(geometry, this.material_ocean);\n\t\t\tTweenMax.to(this.material_ocean.uniforms.tt,10,{value:1, yoyo:true, repeat:-1});\n\n\t\t\tthis.mesh_taiwan= new THREE.Mesh(geometry, this.material_taiwan);\n\t\t\t\n\t\t\tthis.scene.add(this.mesh_taiwan);\n\t\t\tthis.scene.add(this.mesh_ocean);\n\t\t\t\n\t\t\tthis.renderer = new THREE.WebGLRenderer({antialias: true, alpha:true});\n\t\t\tthis.renderer.setClearColor(0xffffff,0);\n\t\t\tthis.renderer.sortObjects=false;\n\n\t\t\tthis.renderer.setSize(container.clientWidth, container.clientHeight);\n\t\t\tcontainer.appendChild(this.renderer.domElement);\n\t\t},\n\t\tanimate:function(){\n\t\t\trequestAnimationFrame(this.animate)\n\t\t\t// this.mesh_ocean.rotation.x += 0.01\n\t\t\t// this.mesh_ocean.rotation.y += 0.02\n\n\n\t\t\tvar i=0;\n\t\t\tfor(i=0;i<NUM_METABALLS;++i)\n\t\t\t\tthis.spots[i].step(this.width,this.height);\n\n\t\t\t// if(this.stage===\"floating\"){\n\t\t\t// \tlet data=this.packSpots(this.spots);\n\t\t\t// \tthis.material_ocean.uniforms.metaballs.value=data;\n\t\t\t// \tthis.material_taiwan.uniforms.metaballs.value=new Float32Array(3*NUM_METABALLS_TW);\n\t\t\t// \t// this.material_taiwan.uniforms.metaballs.value=data;\n\t\t\tif(this.stage===\"island\" || this.stage==='poem'){\n\t\t\t\tvar data_ocean=this.packSpots(this.spots.filter(p=>!p.is_tw),NUM_METABALLS);\n\t\t\t\tvar data_tw=this.packSpots(this.spots.filter(p=>p.is_tw));\n\t\t\t\t\n\t\t\t\tthis.material_ocean.uniforms.metaballs.value=data_ocean;\n\t\t\t\t// this.material_ocean.uniforms.metaballs.value=new Float32Array(3*NUM_METABALLS);\n\t\t\t\t\n\t\t\t\tthis.material_taiwan.uniforms.metaballs.value=data_tw;\n\t\t\t}else{\n\t\t\t\tlet data=this.packSpots(this.spots);\n\t\t\t\t// var data_tw=this.packSpots(this.spots.filter(p=>p.is_tw));\n\t\t\t\tthis.material_ocean.uniforms.metaballs.value=data;\n\t\t\t\tthis.material_taiwan.uniforms.metaballs.value=new Float32Array(3*NUM_METABALLS_TW);\n\t\t\t}\n\t\t\t// }else{\n\t\t\t// \tlet data=this.packSpots(this.spots);\n\t\t\t// \tthis.material_ocean.uniforms.metaballs.value=data;\n\t\t\t// \tthis.material_taiwan.uniforms.metaballs.value=new Float32Array(3*NUM_METABALLS_TW);\n\t\t\t\t\n\t\t\t// }\n\n\t\t\t// var dataToSendToGPU = new Float32Array(3 * NUM_METABALLS);\n\t\t\t// for (i = 0; i <NUM_METABALLS; i++) {\n\t\t\t// \tvar baseIndex = 3 * i;\n\t\t\t// \tvar mb = this.spots[i];\n\t\t\t// \tdataToSendToGPU[baseIndex + 0] = mb.x/this.width;\n\t\t\t// \tdataToSendToGPU[baseIndex + 1] = mb.y/this.height;\n\t\t\t// \tdataToSendToGPU[baseIndex + 2] = mb.r/Math.min(this.width,this.height);\n\t\t\t// }\n\t\t\t// this.material_ocean.uniforms.metaballs.value=dataToSendToGPU;\n\t\t\t// this.material_ocean.uniforms.tt.value++;\n\n\n\n\n\t\t\tthis.renderer.render(this.scene, this.camera);\n\t\t},\n\t\tpackSpots:function(arr,len){\n\t\t\t// console.log(arr);\n\t\t\tif(len==undefined) len=arr.length;\n\n\t\t\tvar dataToSendToGPU = new Float32Array(3 * len);\n\t\t\tfor(var i = 0; i <arr.length; i++){\n\t\t\t\tvar baseIndex = 3 * i;\n\t\t\t\tvar mb = arr[i];\n\t\t\t\tdataToSendToGPU[baseIndex + 0] = mb.x/this.width;\n\t\t\t\tdataToSendToGPU[baseIndex + 1] = mb.y/this.height;\n\t\t\t\tdataToSendToGPU[baseIndex + 2] = mb.r/this.height;\n\t\t\t}\n\t\t\treturn dataToSendToGPU;\n\t\t},\n\t\tresize:function(){\n\n\t\t\tconsole.log('ocean canvas shader resize!');\n\n\t\t\tthis.renderer.setSize(this.width,this.height);\n\t\t\tthis.renderer.render(this.scene,this.camera);\n\t\t\t\n\t\t\tthis.material_ocean.uniforms.width.value=this.width;\n\t\t\tthis.material_ocean.uniforms.height.value=this.height;\n\n\t\t\tthis.material_taiwan.uniforms.width.value=this.width;\n\t\t\tthis.material_taiwan.uniforms.height.value=this.height;\n\n\t\t\tlet mask_region=this.$store.getters.getMaskRegion;\n\t\t\tthis.material_taiwan.uniforms.mask_region.value=new Float32Array([mask_region.x/this.width,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmask_region.y/this.height,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmask_region.w/this.width,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmask_region.w/this.height]);\n\t\t\t// console.log(this.material_taiwan.uniforms.mask_region.value);\n\n\t\t\t// this.gl.bindFramebuffer(this.gl.FRAMEBUFFER, null);\n\t\t\t// this.gl.viewport(0, 0, this.gl.canvas.width, this.gl.canvas.height);\n\t\t\tfor(var i=0;i<NUM_METABALLS;++i){\n\t\t\t\tthis.spots[i].width=this.width;\n\t\t\t\tthis.spots[i].height=this.height;\n\n\t\t\t\t\tif(this.stage==='island'){\n\t\t\t\t\t\tif(!this.spots[i].is_tw){\n\t\t\t\t\t\tvar index=i-NUM_METABALLS_TW;\n\t\t\t\t\t\tlet pos=this.$store.getters.getOceanPositionCanvas(index);\n\t\t\t\t\t\t// console.log(pos);\n\t\t\t\t\t\tthis.spots[i].setDest(pos.x,pos.y,TRANSITON_INTERVAL*.1,.25);\n\t\t\t\t\t}else{\n\t\t\t\t\t\t// var rad=.4;\n\t\t\t\t\t\tlet pos=this.$store.getters.getIslandPositionCanvas(i);\n\t\t\t\t\t\tthis.spots[i].setDest(pos.x,pos.y,TRANSITON_INTERVAL*.1,pos.r);\t\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tgoIsland:function(){\n\n\n\t\t\tvar i;\n\t\t\tfor(i=0;i<NUM_METABALLS;++i){\n\t\t\t\tthis.spots[i].stage='island';\n\t\t\t\t// console.log(i);\n\t\t\t\t// if(i<this.$store.state.island.length){\n\t\t\t\tif(!this.spots[i].is_tw){\n\t\t\t\t\tvar index=i-NUM_METABALLS_TW;\n\t\t\t\t\tlet pos=this.$store.getters.getOceanPositionCanvas(index);\n\t\t\t\t\t// console.log(pos);\n\t\t\t\t\tthis.spots[i].setDest(pos.x,pos.y,TRANSITON_INTERVAL,.25);\n\t\t\t\t}else{\n\t\t\t\t\t// var rad=.4;\n\t\t\t\t\tlet pos=this.$store.getters.getIslandPositionCanvas(i);\n\t\t\t\t\tthis.spots[i].setDest(pos.x,pos.y,TRANSITON_INTERVAL,pos.r);\t\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tTweenMax.to(this.material_taiwan.uniforms.tt,TRANSITON_INTERVAL/1000.0*.5,{value:1,delay:TRANSITON_INTERVAL/1000*0.5});\n\t\t\tTweenMax.to(this.material_ocean.uniforms.layer,TRANSITON_INTERVAL/1000.0,{value:10.0});\n\n\t\t\tthis.setShaderROI(.5,.5,1,1,TRANSITON_INTERVAL*.5,0);\n\n\t\t},\n\t\tgoFloat:function(){\n\t\t\tvar i;\n\t\t\tfor(i=0;i<NUM_METABALLS;++i){\n\t\t\t\tthis.spots[i].stage='floating';\n\t\t\t\tthis.spots[i].setDest(undefined,undefined,TRANSITON_INTERVAL);\n\t\t\t}\n\t\t\t\n\t\t\tTweenMax.to(this.material_taiwan.uniforms.tt,TRANSITON_INTERVAL/1000.0,{value:0});\n\t\t\tTweenMax.to(this.material_ocean.uniforms.layer,TRANSITON_INTERVAL/1000.0,{value:5.0});\n\n\t\t\tthis.setShaderROI(.5,.5,1,1,TRANSITON_INTERVAL*2,0);\n\n\t\t},\n\t\tgoPoem:function(index){\n\t\t\t\n\t\t\tconsole.log('go poem!');\n\t\t\tindex+=NUM_METABALLS_TW;\n\n\t\t\t// for(var i=0;i<NUM_METABALLS;++i){\n\t\t\t// \tthis.spots[i].stage='island';\n\t\t\t// \tif(i==index || Math.random()*3<1){\n\t\t\t// \t\tvar dest_rad=Math.min(this.width,this.height)*.5*(Math.random()*.5+.5);\n\t\t\t// \t\tthis.spots[i].setDest(this.width/2+(Math.random()*2-1)*dest_rad,this.height/2+(Math.random()*2-1)*dest_rad,TRANSITON_INTERVAL,.8);\t\n\t\t\t// \t}else{\n\t\t\t// \t\tvar ang=Math.random()*Math.PI*2;\n\t\t\t// \t\tvar rad=(Math.random()*.4+.5);\n\t\t\t// \t\tthis.spots[i].setDest(this.width*(.5+rad*Math.sin(ang)),\n\t\t\t// \t\t\t\t\t\t\tthis.height*(.5+rad*Math.cos(ang)),TRANSITON_INTERVAL);\t\n\t\t\t// \t} \n\t\t\t// }\t\n\t\t\tTweenMax.to(this.material_taiwan.uniforms.tt,TRANSITON_INTERVAL/1000.0,{value:1});\n\t\t\tTweenMax.to(this.material_ocean.uniforms.layer,TRANSITON_INTERVAL/1000.0,{value:8.0});\n\n\t\t\t// console.log('dest pos= '+this.spots[index].x+' , '+this.spots[index].y);\n\t\t\tthis.setShaderROI(this.spots[index].x/this.width,this.spots[index].y/this.height,.1,.1,TRANSITON_INTERVAL*.5,0);\n\n\t\t\t\n\t\t},\n\t\tsetShaderROI:function(x,y,w,h,interval,delay){\n\t\t\tTweenMax.to(this.material_ocean.uniforms.roi_pos_x,interval/1000.0,{value:x,delay:delay,ease:Expo.easeOut});\n\t\t\tTweenMax.to(this.material_ocean.uniforms.roi_pos_y,interval/1000.0,{value:y,delay:delay,ease:Expo.easeOut});\n\t\t\tTweenMax.to(this.material_ocean.uniforms.roi_size_x,interval/1000.0,{value:w,delay:delay,ease:Expo.easeOut});\n\t\t\tTweenMax.to(this.material_ocean.uniforms.roi_size_y,interval/1000.0,{value:h,delay:delay,ease:Expo.easeOut});\n\n\t\t\tTweenMax.to(this.material_taiwan.uniforms.roi_pos_x,interval/1000.0,{value:x,delay:delay,ease:Expo.easeOut});\n\t\t\tTweenMax.to(this.material_taiwan.uniforms.roi_pos_y,interval/1000.0,{value:y,delay:delay,ease:Expo.easeOut});\n\t\t\tTweenMax.to(this.material_taiwan.uniforms.roi_size_x,interval/1000.0,{value:w,delay:delay,ease:Expo.easeOut});\n\t\t\tTweenMax.to(this.material_taiwan.uniforms.roi_size_y,interval/1000.0,{value:h,delay:delay,ease:Expo.easeOut});\n\n\n\t\t},\n\t\tsetStage:function(set_,index){\n\t\t\tswitch(set_){\n\t\t\t\tcase 'floating': this.goFloat(); break;\n\t\t\t\tcase 'island': this.goIsland(); break;\n\t\t\t\tcase 'poem':this.goPoem(index);break;\n\t\t\t}\n\t\t\tthis.stage=set_;\n\t\t},\n\t},\n\tmounted(){\n\t\tthis.init();\n\t\tthis.animate();\n\t}\n\n}\n</script>\n<style lang=\"scss\" scoped>\n#_ocean_container{\n\twidth:100%;\n\theight:100%;\n}\n</style>\n\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OceanCanvas.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OceanCanvas.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./OceanCanvas.vue?vue&type=template&id=26b65543&scoped=true&\"\nimport script from \"./OceanCanvas.vue?vue&type=script&lang=js&\"\nexport * from \"./OceanCanvas.vue?vue&type=script&lang=js&\"\nimport style0 from \"./OceanCanvas.vue?vue&type=style&index=0&id=26b65543&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"26b65543\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"_poem_container\"}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import {TweenMax,Sine} from 'gsap';\nimport * as THREE from 'three';\n\nexport const MOVE_INTERVAL=1000;\n\nexport const FONT_SIZE=30;\nexport const LINE_HEIGHT=FONT_SIZE*1.5;\nconst TEXT_WIDTH=FONT_SIZE*1.2;\n\nconst START_Z=-2200;\n\nexport default class PoemChar{\n\tconstructor(text,destx,desty,destz,color,repeat=-1,delay){\n\n\t\tthis.color=color;\n\t\tthis.createObject(text);\n\t\tthis.tween;\n\t\tthis.setDest(destx,desty,destz,repeat,delay);\n\t\t\n\t\tthis.repeat=repeat;\n\t\tthis.stage='floating';\n\n\t}\n\tcreateObject(text){\n\t\t// create canvas\n\t\tthis.canvas=document.createElement('canvas');\n\t\tthis.context=this.canvas.getContext('2d');\n\t\tthis.context.fillStyle='transparant';\n\t\t// let metrics=context.measureText(text);\n\t\t// console.log(text+' = '+textWidth+' '+textHeight);\n\n\t\tthis.canvas.width=TEXT_WIDTH;\n\t\tthis.canvas.height=TEXT_WIDTH;\n\t\tthis.context.textAlign=\"center\";\n\t\tthis.context.textBaseline=\"middle\";\n\t\tthis.context.font=FONT_SIZE+'px Noto Sans TC';\n\t\t\n\t\tthis.drawText(text);\n\n\t\tthis.texture=new THREE.CanvasTexture(this.canvas);\n\t\tthis.texture.needsUpdate=true;\n\t\tthis.material=new THREE.SpriteMaterial({map:this.texture,\n\t\t\t\t\t\t\t\t\t\t\t\tcolor:0xffffff,\n\t\t\t\t\t\t\t\t\t\t\t\tfog:true,\n\t\t\t\t\t\t\t\t\t\t\t\tdepthWrite:false,});\n\t\tvar sprite = new THREE.Sprite(this.material);\n\n\t\tthis.textObject = new THREE.Object3D();\n\t\t// var sprite = new THREE.Sprite(texture);\n\t\tthis.textObject.textHeight = TEXT_WIDTH;\n\t\tthis.textObject.textWidth = TEXT_WIDTH;\n\t\tsprite.scale.set(FONT_SIZE, FONT_SIZE, 1);\n\t\t\n\t\tthis.textObject.add(sprite);\n\n\t}\n\tdrawText(text){\n\t\tthis.context.clearRect(0,0,this.canvas.width,this.canvas.height);\n\t\t\n\t\tthis.context.fillStyle=this.color;\n\t\tthis.context.fillText(text,TEXT_WIDTH/2,TEXT_WIDTH/2);\n\n\t\tif(this.texture) this.texture.needsUpdate=true;\n\t\t\n\n\t}\n\tupdateChar(text,destx,desty,destz,color,repeat=-1,delay){\n\t\tthis.color=color;\n\t\tthis.drawText(text);\n\t\t\n\t\tthis.setDest(destx,desty,destz,repeat,delay);\n\t}\n\tatDest(){\n\t\treturn !this.tween.isActive();\n\t}\n\tsetDest(destx,desty,destz,repeat,delay){\n\n\t\tlet interval=MOVE_INTERVAL*(Math.random()*1.0+1.0);\n\t\tif(delay===undefined) interval*Math.random()*.5;\t\n\t\n\t\tvar p=Math.random();\n\t\tthis.textObject.position.x=destx*p;\n\t\tthis.textObject.position.y=desty*p;\n\t\tthis.textObject.position.z=START_Z;\n\t\t\n\t\tif(this.tween) this.tween.kill();\n\t\tthis.tween=TweenMax.to(this.textObject.position,interval/1000.0,{\n\t\t\tx:destx,\n\t\t\ty:desty,\n\t\t\tz:destz,\n\t\t\toverwrite:'all',\n\t\t\tease:Sine.easeInOut,\n\t\t\tdelay:delay/1000,\n\t\t\trepeat:repeat,\n\t\t});\n\t\t// this.tween.stop();\n\t\t\n\t}\n\treset(){\n\t\tif(this.tween) this.tween.pause();\n\t\tthis.textObject.position.z=START_Z;\n\t}\n\trestart(){\n\t\tthis.tween.restart();\n\t\tthis.fadeIn();\n\t}\n\tsetRepeat(set_){\n\t\tthis.tween.repeat(set_);\n\t}\n\tfadeOut(){\n\t\tTweenMax.to(this.material,2,{\n\t\t\topacity:0,\n\t\t});\n\t}\n\tfadeIn(){\n\t\tTweenMax.to(this.material,2,{\n\t\t\topacity:1,\n\t\t});\n\t}\n}","<template>\n\t<div id=\"_poem_container\"></div>\t\n</template>\n\n\n<script type=\"text/javascript\">\nimport * as THREE from 'three';\nimport PoemChar from './PoemChar.js';\nimport {FONT_SIZE,LINE_HEIGHT,MOVE_INTERVAL} from './PoemChar.js';\n\n \n// const TRANSITON_INTERVAL=2500;\nconst NUM_CHAR=50;\nconst NUM_POEM_MAX=120;\nconst WEATHER_COLOR=\"#E8FFD3\";\nconst POEM_COLOR=\"white\";\nconst POEM_PADDING=60;\nconst CHAR_STAGGER_INTERVAL=100;\n\nconst POEM_DELAY_INTERVAL=5000;\n\nexport default{\n\tname:'poem-canvas',\n\tdata(){\n\t\treturn{\n\t\t\tcamera:null,\n\t\t\tscene:null,\n\t\t\trenderer:null,\n\t\t\twidth:this.$store.state.screenWidth,\n\t\t\theight:this.$store.state.screenHeight,\n\t\t\tdummy_text:[],\n\t\t\tpoem_text:[],\n\t\t\tcameraZ:2000,\n\t\t\tstage:'floating',\n\t\t\tauthor:'',\n\t\t}\n\t},\n\tcomputed:{\n\t\ttextwidth:function(){\n\t\t\treturn Math.min(this.width,this.height*0.625);\n\t\t},\n\t\tdestZ:function(){\n\t\t\tvar vFov=this.camera.fov*Math.PI/180;\n\t\t\treturn this.height/(2*Math.tan(vFov/2));\n\t\t}\n\t},\n\twatch:{\n\t\t'$store.state.screenWidth':function(val){\n\t\t\tthis.width=val;\n\t\t\tthis.resize();\n\t\t},\n\t\t'$store.state.screenHeight':function(val){\n\t\t\tthis.height=val;\n\t\t\tthis.resize();\n\t\t}\n\t},\n\tmethods:{\n\t\tinit:function(){\n\t\t\tvar container = document.getElementById('_poem_container');\n\t\t\tthis.camera = new THREE.PerspectiveCamera(60, container.clientWidth/container.clientHeight, 0.01, this.cameraZ);\n\t\t\tthis.camera.position.z = 0;\n\n\t\t\tthis.scene = new THREE.Scene();\n\n\t\t\n\t\t\t\n\t\t\tthis.renderer = new THREE.WebGLRenderer({antialias: true, alpha:true});\n\t\t\tthis.renderer.setClearColor(0xffffff,0);\n\t\t\tthis.renderer.sortObjects=false;\n\n\t\t\tthis.renderer.setSize(container.clientWidth, container.clientHeight);\n\t\t\tcontainer.appendChild(this.renderer.domElement);\n\n\t\t\tthis.resetChar();\n\t\t},\n\t\tresize:function(){\n\t\t\t\n\t\t\tthis.renderer.setSize(this.width,this.height);\n\t\t\tthis.renderer.render(this.scene,this.camera);\n\t\t\n\t\t},\n\t\tanimate:function(){\n\n\t\t\t// if(Math.random()*10<1) this.addChar('A');\n\t\t\tif(this.stage==='poem') \n\t\t\t\tthis.renderer.render(this.scene, this.camera);\n\n\t\t\trequestAnimationFrame(this.animate);\n\t\t\t\n\t\t},\n\t\taddWeather:function(arr,loc,date){\n\n\t\t\t// TODO: end dummy text\n\t\t\tfor(i in this.dummy_text){\n\t\t\t\tthis.dummy_text[i].fadeOut();\n\t\t\t}\n\n\t\t\t\n\n\t\t\tlet len=0;\n\t\t\tfor(i in arr){\n\t\t\t\tlen+=arr[i].poem.length+1;\n\t\t\t\tif(arr[i].concat) len-=1;\n\t\t\t}\n\t\t\tconsole.log('#line= '+len);\n\t\t\tlet startx=-(this.textwidth/2-POEM_PADDING);//(this.width/this.height)/2;\n\t\t\tlet starty=LINE_HEIGHT*(len+5)/2;\n\t\t\t// let t=0;\n\t\t\tlet index=0;\n\t\t\tlet lastx=0;\n\t\t\t\t\n\t\t\tlet destz=this.camera.position.z-this.destZ;\n\t\t\tlet poem_delay=POEM_DELAY_INTERVAL;\n\t\t\t\n\t\t\tfor(var i in arr){\n\t\t\t\tlet text=arr[i].text;\n\t\t\t\t[index,starty,lastx]=this.addLine(index,text,startx,starty,destz,WEATHER_COLOR,0,0)\n\n\t\t\t\tlet poem=arr[i].poem;\n\t\t\t\tfor(var k in poem){\n\n\t\t\t\t\tif(k==0 && arr[i].concat){\n\t\t\t\t\t\t// console.log('first line concat!');\n\t\t\t\t\t\tstarty+=LINE_HEIGHT;\n\t\t\t\t\t\t[index,starty,lastx]=this.addLine(index,poem[k],\n\t\t\t\t\t\t\t\t\t\t\t\t\tlastx,\n\t\t\t\t\t\t\t\t\t\t\t\t\tstarty,\n\t\t\t\t\t\t\t\t\t\t\t\t\tdestz,\n\t\t\t\t\t\t\t\t\t\t\t\t\tPOEM_COLOR,0,poem_delay);\n\t\t\t\t\t}else{\n\t\t\t\t\t\t[index,starty,lastx]=this.addLine(index,poem[k],\n\t\t\t\t\t\t\t\t\t\t\t\t\tstartx,\n\t\t\t\t\t\t\t\t\t\t\t\t\tstarty,\n\t\t\t\t\t\t\t\t\t\t\t\t\tdestz,\n\t\t\t\t\t\t\t\t\t\t\t\t\tPOEM_COLOR,0,poem_delay);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tlet weather_delay=POEM_DELAY_INTERVAL+MOVE_INTERVAL;\n\t\t\t\n\t\t\tlet locx=this.textwidth/2-POEM_PADDING;\n\t\t\tlet locy=starty-LINE_HEIGHT;\n\n\t\t\t[index,locy,lastx]=this.addLine(index,this.author,locx-this.author.length*FONT_SIZE,locy,destz,POEM_COLOR,0,weather_delay);\n\t\t\t\n\t\t\tlocy-=LINE_HEIGHT;\n\t\t\t[index,locy,lastx]=this.addLine(index,loc,locx-loc.length*FONT_SIZE,locy,destz,POEM_COLOR,0,weather_delay);\n\n\t\t\t//locy-=LINE_HEIGHT;\n\t\t\t[index,locy,lastx]=this.addLine(index,date,locx-date.length*FONT_SIZE*.5,locy,destz,POEM_COLOR,0,weather_delay);\n\n\t\t\treturn [poem_delay,weather_delay];\n\t\t},\n\t\taddLine:function(index,text,startx,starty,destz,color,repeat,delay){\n\t\t\tvar t=0;\n\t\t\tvar lastx=0;\n\t\t\tvar lasty=starty;\n\t\t\tfor(var k in text){\n\t\t\t\t\n\t\t\t\tif(lastx+startx>=this.textwidth/2-POEM_PADDING){\n\t\t\t\t\tlastx=0;\n\t\t\t\t\tstartx=-this.textwidth/2+POEM_PADDING;\n\t\t\t\t\tlasty-=LINE_HEIGHT;\n\t\t\t\t}\n\n\t\t\t\tlastx+=FONT_SIZE*(this.isASCII(text[k])?-.25:0);\n\n\t\t\t\tthis.addChar(index,text[k],\n\t\t\t\t\t\t\tlastx+startx,\n\t\t\t\t\t\t\tlasty,\n\t\t\t\t\t\t\tdestz,\n\t\t\t\t\t\t\tcolor,0,t+delay);\n\n\t\t\t\tlastx+=FONT_SIZE*(this.isASCII(text[k])?.75:1);\n\t\t\t\t\n\t\t\t\tt+=CHAR_STAGGER_INTERVAL;\n\t\t\t\tindex++;\n\t\t\t}\n\t\t\tlasty-=LINE_HEIGHT;\n\n\t\t\treturn [index,lasty,lastx+startx];\n\t\t},\n\t\taddChar:function(index,text,destx,desty,destz,color='white',repeat=-1,delay){\n\t\t\t\n\t\t\tlet arr=(repeat==-1)?this.dummy_text:this.poem_text;\n\t\t\tif(index<arr.length){ // recycle char\n\t\t\t\tarr[index].updateChar(text,\n\t\t\t\t\t\t\t\t\tdestx,\n\t\t\t\t\t\t\t\t\tdesty,\n\t\t\t\t\t\t\t\t\tdestz,\n\t\t\t\t\t\t\t\t\tcolor,repeat,delay);\n\t\t\t\t// console.log('update char '+index);\n\n\t\t\t}else{\n\t\t\t\tthis.insertChar(text,\n\t\t\t\t\t\t\tdestx,\n\t\t\t\t\t\t\tdesty,\n\t\t\t\t\t\t\tdestz,\n\t\t\t\t\t\t\tcolor,repeat,delay);\n\t\t\t}\n\t\t\t\n\t\t},\n\t\tinsertChar:function(char_,destx,desty,destz,color='white',repeat=-1,delay){\n\t\t\n\t\t\tvar pchar=new PoemChar(char_,\n\t\t\t\t\t\t\t(destx!==undefined)?destx:Math.random()*this.width-this.width/2,\n\t\t\t\t\t\t\t(desty!==undefined)?desty:Math.random()*this.height-this.height/2,\n\t\t\t\t\t\t\t(destz!==undefined)?destz:0,\n\t\t\t\t\t\t\tcolor,\n\t\t\t\t\t\t\trepeat,\n\t\t\t\t\t\t\tdelay);\n\t\t\t// text.position.x=Math.random()*this.width-this.width/2;\n\t\t\t// text.position.y=Math.random()*this.height-this.height/2;\n\t\t\t// text.position.z=-Math.random()*100;\n\n\t\t\tif(repeat==-1) this.dummy_text.push(pchar);\n\t\t\telse this.poem_text.push(pchar);\n\n\t\t\t\n\t\t\tthis.scene.add(pchar.textObject);\n\t\t},\n\t\tisASCII: function(str){\n\t\t\t// var t=/^\\w+$/.test(str);\n\t\t\t// if(t) console.log(str);\n\t\t\treturn str.charCodeAt(0)<128;\n\t\t},\n\t\tclear:function(){\n\t\t\t\n\t\t\tfor(var i in this.poem_text){\n\t\t\t\t// this.scene.remove(this.poem_text[i].textObject);\n\t\t\t\tthis.poem_text[i].reset();\n\t\t\t}\n\t\t\t// this.poem_text=[];\n\n\t\t\tfor(i in this.dummy_text){\n\t\t\t\tthis.dummy_text[i].reset();\n\t\t\t}\n\n\t\t\tthis.renderer.clear();\n\t\t\t// this.renderer.render(this.scene, this.camera);\n\t\t},\n\t\tresetChar:function(){\n\t\t\t\n\t\t\tvar tmp=Math.floor(Math.random()*1000);\n\n\t\t\tfor(var i in this.dummy_text){\n\t\t\t\t// this.dummy_text[i].setRepeat(-1)\n\t\t\t\tvar t=this.$store.getters.getDummyChar(i+tmp);\n\t\t\t\t// console.log(t);\n\t\t\t\tthis.dummy_text[i].drawText(t);\n\t\t\t\tthis.dummy_text[i].restart();\n\t\t\t}\n\t\t},\n\t\tsetStage:function(set_){\n\t\t\t\n\t\t\tthis.clear();\n\t\t\tif(set_==='poem'){\n\t\t\t\tthis.resetChar();\n\t\t\t}\n\t\t\tthis.stage=set_;\n\t\t}\n\t},\n\tcreated(){\n\t\t\n\t},\n\tmounted(){\n\t\tthis.init();\n\t\tfor(var i=0;i<NUM_CHAR;++i) this.insertChar(this.$store.getters.getDummyChar(i));\n\t\tfor(i=0;i<NUM_POEM_MAX*2;++i) this.insertChar('A',0,0,0,WEATHER_COLOR,0,0);\n\n\t\tthis.animate();\n\t},\n}\n</script>\n<style lang=\"scss\" scoped>\n#_poem_container{\n\tposition: absolute;\n\ttop:0;\n\twidth:100%;\n\theight:100%;\n}\n</style>\n\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PoemCanvas.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PoemCanvas.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PoemCanvas.vue?vue&type=template&id=2bb5959a&scoped=true&\"\nimport script from \"./PoemCanvas.vue?vue&type=script&lang=js&\"\nexport * from \"./PoemCanvas.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PoemCanvas.vue?vue&type=style&index=0&id=2bb5959a&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2bb5959a\",\n  null\n  \n)\n\nexport default component.exports","<template>\n <div id=\"app\" class=\"FullScreen\">   \n    <ocean-canvas ref=\"_ocean_canvas\"></ocean-canvas>   \n    <PoemCanvas ref=\"_poem_canvas\"></PoemCanvas> \n    \n    <div id=\"_page\" class=\"CenterWrapper\">\n      <div class=\"MainScreen\">\n        <transition name=\"page-fade\">\n          <keep-alive>\n            <router-view class=\"MainPage\"></router-view>\n          </keep-alive>\n        </transition>\n      </div>\n    </div>\n\n  </div>\n</template>\n\n<script>\nimport {Howl} from 'howler';\nimport OceanCanvas from './components/ocean/OceanCanvas.vue';\nimport PoemCanvas from './components/poem/PoemCanvas.vue';\n\nexport default{\n  data(){\n    return{\n      sound_bgm:null,\n      sound_processing:null,\n      sound_fadein:null,\n      sound_finish:null,\n    };\n  },\n  components:{\n    OceanCanvas,\n    PoemCanvas\n  },\n  created:function(){\n    // this.$store.dispatch('computePageSize');\n    this.$store.dispatch('fetchIslandData');\n    this.$store.dispatch('fetchDummyChar');\n\n    this.loadSound();\n  },\n  methods:{\n    setStage:function(set_,index){\n\n        this.$refs._ocean_canvas.setStage(set_,index);\n        this.$refs._poem_canvas.setStage(set_);\n\n        this.sound_fadein.stop();\n        this.sound_finish.stop();\n        if(set_!=='poem') this.sound_processing.stop();\n        \n    },\n    loadSound(){\n        this.sound_bgm=new Howl({\n          src:['audio/back.wav']\n        });\n        this.sound_bgm.loop(true);\n\n        this.sound_processing=new Howl({\n          src:['audio/processing.wav']\n        });\n        this.sound_processing.loop(true);\n\n        this.sound_fadein=new Howl({\n          src:['audio/fadein.wav']\n        });\n        // this.sound_fadein.rate(.8);\n        this.sound_finish=new Howl({\n          src:['audio/finish.wav']\n        });\n        \n    },\n  }\n}\n</script>\n\n<style lang=\"scss\">\n@import \"./assets/style/common.scss\";\n@import \"./assets/style/global_var.scss\";\n@import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC&display=swap');\n\n#app {\n  font-family:'Noto Sans TC', sans-serif;\n  text-align: center;\n  // margin-top: 60px; \n  background:$ocean-blue;\n}\n#_page{\n  position: absolute;\n  top:0;\n  left:0;\n  right: 0;\n  bottom: 0;\n}\n.page-fade-enter-active,.page-fade-leave-active{\n  transition:all $page-transition-time ease;\n}\n.page-fade-enter-active{\n  transition-delay:$page-transition-time;\n}\n.page-fade-enter,.page-fade-leave-active{\n  opacity: 0;\n}\n.page-fade-enter-to,.page-fade-leave{\n  opacity: 1;\n}\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=2def9109&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"CenterWrapper\",on:{\"click\":_vm.startClick}},[_c('div',{staticClass:\"CenterWrapper\",attrs:{\"id\":\"_title\"}},[_c('WaveCanvas',{attrs:{\"id\":\"title\",\"img_src\":\"img/title.png\",\"ratio\":0.65}}),_c('WaveCanvas',{staticClass:\"HintRegion\",attrs:{\"id\":\"hint1\",\"img_src\":\"img/hint-1.png\",\"ratio\":0.32}})],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"_curtain\",staticClass:\"WaveCanvas\",attrs:{\"id\":_vm.id+'_curtain'}},[_c('div',{staticClass:\"canvas\",attrs:{\"id\":_vm.id+'_canvas'}}),_c('div',{staticClass:\"plane\",attrs:{\"id\":_vm.id+'_plane'}},[_c('img',{attrs:{\"src\":_vm.img_src,\"id\":_vm.id+'_img'}})])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export const vs = `\n        precision mediump float;\n        // default mandatory variables\n        attribute vec3 aVertexPosition;\n        attribute vec2 aTextureCoord;\n        uniform mat4 uMVMatrix;\n        uniform mat4 uPMatrix;\n        \n        // our texture matrix uniform\n        uniform mat4 uTextureMatrix0;\n        // custom variables\n        varying vec3 vVertexPosition;\n        varying vec2 vTextureCoord;\n        uniform float uTime;\n        uniform vec2 uResolution;\n        uniform vec2 uMousePosition;\n        uniform float uMouseMoveStrength;\n        void main() {\n            vec3 vertexPosition = aVertexPosition;\n            // get the distance between our vertex and the mouse position\n            float distanceFromMouse = distance(uMousePosition, vec2(vertexPosition.x, vertexPosition.y));\n            // calculate our wave effect\n            float waveSinusoid = cos(5.0 * (distanceFromMouse - (uTime / 75.0)));\n            // attenuate the effect based on mouse distance\n            float distanceStrength = (0.4 / (distanceFromMouse + 0.4));\n            // calculate our distortion effect\n            float distortionEffect = distanceStrength * waveSinusoid * uMouseMoveStrength;\n            // apply it to our vertex position\n            vertexPosition.z +=  distortionEffect / 30.0;\n            vertexPosition.x +=  (distortionEffect / 30.0 * (uResolution.x / uResolution.y) * (uMousePosition.x - vertexPosition.x));\n            vertexPosition.y +=  distortionEffect / 30.0 * (uMousePosition.y - vertexPosition.y);\n            gl_Position = uPMatrix * uMVMatrix * vec4(vertexPosition, 1.0);\n            // varyings\n            vTextureCoord = (uTextureMatrix0 * vec4(aTextureCoord, 0.0, 1.0)).xy;\n            vVertexPosition = vertexPosition;\n        }\n    `;\n\nexport const fs = `\n        precision mediump float;\n        varying vec3 vVertexPosition;\n        varying vec2 vTextureCoord;\n        uniform sampler2D uSampler0;\n        float map(float value, float min1, float max1, float min2, float max2) {\n            return min2 + (value - min1) * (max2 - min2) / (max1 - min1);\n        }\n        void main() {\n            // apply our texture\n            float x=map(vTextureCoord.x,0.0,1.0,-.1,1.1);\n            float y=map(vTextureCoord.y,0.0,1.0,-.1,1.1);\n            if(x<0.0 || x>1.0 || y<0.0 || y>1.0){\n                gl_FragColor=vec4(0,0,0,0);\n                return;\n            }\n            vec4 finalColor = texture2D(uSampler0, vec2(x,y));\n            // fake shadows based on vertex position along Z axis\n            finalColor.rgb -= clamp(-vVertexPosition.z, 0.0, 1.0);\n            // fake lights based on vertex position along Z axis\n            finalColor.rgb += clamp(vVertexPosition.z, 0.0, 1.0);\n            // handling premultiplied alpha (useful if we were using a png with transparency)\n            finalColor = vec4(finalColor.rgb * finalColor.a, finalColor.a);\n            gl_FragColor = finalColor;\n        }\n    `;\n","<template>\n\t<div :id=\"id+'_curtain'\" ref=\"_curtain\" class=\"WaveCanvas\">\n\t\t<div class=\"canvas\" :id=\"id+'_canvas'\"></div>\n\t\t<div class=\"plane\" :id=\"id+'_plane'\">\n\t\t\t<!-- <img src=\"../../assets/img/title-04.png\"/> -->\n\t\t\t<img :src=\"img_src\" :id=\"id+'_img'\"/>\n\t\t</div>\n\t</div>\n</template>\n\n<script type=\"text/javascript\">\nimport {Curtains} from 'curtainsjs';\nimport {vs,fs} from './WaveShader.js';\n\nexport default{\n\tname:'wave-canvas',\n\tdata(){\n\t\treturn{\n\t\t\tcurtains:null,\n\t\t\tplane:null,\n\t\t\tlastPoint:{x:0,y:0},\n\t\t\tphi:Math.random()*Math.PI*2,\n\t\t\tamp:1\n\t\t}\n\t},\n\twatch:{\n\t\t'$store.state.screenWidth':function(val){\n\t\t\tthis.resize(val);\n\t\t},\n\t\t'$store.state.screenHeight':function(val){\n\t\t\tthis.resize(val);\n\t\t}\n\t},\n\tprops:{\n\t\timg_src:String,\n\t\tid:String,\n\t\tratio:Number\n\t},\n\tmounted:function(){\n\t\tthis.init(this.$props.ratio);\n\t},\n\tmethods:{\n\t\tinit:function(ratio){\n\t\t\t// console.log('init curtain');\n\n\t\t\tlet planeElement=document.getElementById(this.$props.id+\"_plane\");\n\t\t\tlet curtainElement=document.getElementById(this.$props.id+\"_curtain\");\n\t\t\tcurtainElement.style.height=ratio*curtainElement.clientWidth+'px';\n\t\t\t// console.log(curtainElement.style.height);\n\n\t\t\tthis.curtains=new Curtains({container:this.$props.id+\"_canvas\",\n\t\t\t\t\t\t\t\t\t\tproduction:true,\n\t\t\t\t\t\t\t\t\t\tautoResize:false});\n\t\t\t\n\t\t\tlet params={\n\t\t\t\tvertexShader: vs, // our vertex shader ID\n\t\t\t\tfragmentShader: fs, // our fragment shader ID\n\t\t\t\twidthSegments: 10,\n\t\t\t\theightSegments: 5,\n\t\t\t\tuniforms: {\n\t\t\t\t\tresolution: { // resolution of our plane\n\t\t\t\t\t\tname: \"uResolution\",\n\t\t\t\t\t\ttype: \"2f\", // notice this is an length 2 array of floats\n\t\t\t\t\t\tvalue: [1,ratio],\n\t\t\t\t\t},\n\t\t\t\t\ttime: { // time uniform that will be updated at each draw call\n\t\t\t\t\t\tname: \"uTime\",\n\t\t\t\t\t\ttype: \"1f\",\n\t\t\t\t\t\tvalue: 0,\n\t\t\t\t\t},\n\t\t\t\t\tmousePosition: { // our mouse position\n\t\t\t\t\t\tname: \"uMousePosition\",\n\t\t\t\t\t\ttype: \"2f\", // again an array of floats\n\t\t\t\t\t\tvalue: [this.lastPoint.x, this.lastPoint.y],\n\t\t\t\t\t},\n\t\t\t\t\tmouseMoveStrength: { // the mouse move strength\n\t\t\t\t\t\tname: \"uMouseMoveStrength\",\n\t\t\t\t\t\ttype: \"1f\",\n\t\t\t\t\t\tvalue: 0,\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\tthis.plane=this.curtains.addPlane(planeElement,params);\n\t\t\t// if(this.plane){\n\t\t\t// \tthis.plane.onRender(function(){\n\t\t\t// \t\tthis.plane.uniforms.time.value++;\n\t\t\t// \t});\n\t\t\t// }\n\t\t\tcurtainElement.getElementsByTagName('canvas')[0].style.width='100%';\n\t\t\tcurtainElement.getElementsByTagName('canvas')[0].style.height='unset';\n\n\t\t\tthis.lastPoint=[Math.random(),Math.random()];\n\t\t\tthis.draw();\n\n\t\t},\n\t\tresize:function(){\n\t\t\tthis.$refs._curtain.style.height=this.$refs._curtain.clientWidth*this.$props.ratio+'px';\n\t\t},\n\t\tdraw:function(){\n\t\t\t// if(this.plane) this.plane.uniforms.time.value++;\n\t\t\tif(this.plane){\n\t\t\t\tthis.lastPoint[0]+=Math.sin(this.plane.uniforms.time.value/20.0+this.phi)*.1;\n\t\t\t\tthis.lastPoint[1]+=Math.sin(this.plane.uniforms.time.value/50.0+this.phi)*.1;\n\t\t\t\tthis.plane.uniforms.mousePosition.value=this.lastPoint;\n\t\t\t\tthis.plane.uniforms.time.value++;\n\t\t\t\tthis.plane.uniforms.mouseMoveStrength.value=Math.abs(Math.sin(this.plane.uniforms.time.value/100.0)*this.amp)+0.2;\n\t\t\t}\n\t\t\trequestAnimationFrame(this.draw);\n\t\t}\n\t}\n\n}\n\n</script>\n<style lang=\"scss\">\n.WaveCanvas{\n\tposition: relative;\n\twidth:100%;\n\topacity: 1;\n\t// height:1474 / 2282 * 100%;\n\t// height:100%;\n\t.canvas{\n\t\tposition: absolute;\n\t\twidth:100%;\n\t\theight:100%;\n\t}\n\t.plane{\n\t\tposition: absolute;\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\tleft:0;\n\t\ttop:0;\n\t\t// bottom:0;\n\t\t// right: 0;\n\t\t// padding:-5px;\n\t\t// display: none;\n\t\timg{\n\t\t\tdisplay:none;\n\t\t}\n\t}\n}\n\n\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WaveCurtain.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WaveCurtain.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./WaveCurtain.vue?vue&type=template&id=36ac96e8&\"\nimport script from \"./WaveCurtain.vue?vue&type=script&lang=js&\"\nexport * from \"./WaveCurtain.vue?vue&type=script&lang=js&\"\nimport style0 from \"./WaveCurtain.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n\t<div class=\"CenterWrapper\" @click=\"startClick\">\n\t\t<div id=\"_title\" class=\"CenterWrapper\">\n\t\t\t<!-- <TitleSvg/> -->\n\t\t\t<WaveCanvas id=\"title\" img_src=\"img/title.png\" :ratio=\"0.65\"></WaveCanvas>\n\t\t\t<WaveCanvas class=\"HintRegion\" id=\"hint1\" img_src=\"img/hint-1.png\" :ratio=\"0.32\"></WaveCanvas>\n\t\t\t<!-- <div class=\"HintRegion\">\n\t\t\t\t<br>\n\t\t\t\t\n\t\t\t</div> -->\n\t\t</div>\n\t\t<!-- <div>{{date_str}}</div> -->\t\t\t\t\n\t</div>\n</template>\n\n<script>\n// import gsap from 'gsap';\n// import TitleSvg from \"../../assets/img/title.svg\";\nimport WaveCanvas from \"../wavecanvas/WaveCurtain.vue\";\n\nexport default {\n\tname:'PageHome',\n\tcomponents:{\n\t\t// TitleSvg,\n\t\tWaveCanvas\n\t},\n\tdata(){\n\t\treturn{\n\t\t\tdate_str:new Date().toLocaleString(),\n\t\t\twavetexture:null\n\t\t}\n    },\n    methods:{\n\t\tstartClick:function(){\n\t\t\tthis.$router.push('map');\n\t\t\tif(!this.$parent.sound_bgm.playing()) this.$parent.sound_bgm.play();\n\t\t\t// this.$parent.$refs['_ocean_canvas'].goIsland();\t\t\t\t\n\t\t\n\t\t},\n\t\tupdate:function(){\n\n\t\t\trequestAnimationFrame(this.update);\n\t\t}\n    },\n    activated:function(){\n\t\t// gsap.to('#_title',{y:100,duration:3});\n\t\t// this.$parent.setOceanStatus('float');\n\t\tthis.$parent.setStage('floating');\t\t\t\t\n\t\t// this.$refs._title_canvas.init();\n\n\t\t// this.update();\n    }\n}\n</script>\n\n<style lang=\"scss\">\n\n#_title{\n\twidth:100%;\n\tcursor:pointer;\n\tflex-direction:column;\n}\n\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./home.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./home.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./home.vue?vue&type=template&id=5a1776e6&\"\nimport script from \"./home.vue?vue&type=script&lang=js&\"\nexport * from \"./home.vue?vue&type=script&lang=js&\"\nimport style0 from \"./home.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"_map\",staticClass:\"CenterWrapper\",attrs:{\"id\":\"_map\"}},[_c('WaveCanvas',{staticClass:\"HintRegion\",attrs:{\"id\":\"hint2\",\"img_src\":\"img/hint-2.png\",\"ratio\":0.3}}),_vm._l((_vm.ocean),function(item){return _c('ocean-item',{key:item.name,attrs:{\"ocean\":item},nativeOn:{\"click\":function($event){return _vm.writePoem(item.index,item.name)}}})})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"OceanItem\",style:(_vm.style)},[_c('span',[_vm._v(_vm._s(_vm.ocean.name))])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div v-bind:style=\"style\" class=\"OceanItem\">\n\t\t<span>{{ocean.name}}</span>\n\t</div>\n</template>\n\n<script>\n// import gsap from 'gsap';\n\nexport default {\n  name: 'ocean-item',\n  props: ['ocean'],\n  computed:{\n\tstyle(){\n\t\t// console.log(this.ocean);\n\t\t// var w=window.innerWidth;\n\t\t// var h=window.innerHeight;\n\t\tvar pos=this.$store.getters.getOceanPosition(this.ocean.index);\n\t\t// console.log(pos);\n\t\treturn{\n\t\t\tleft:pos.x+'px',\n\t\t\ttop:pos.y+'px'\t\t\t\n\t\t};\n\t}\n  },\n  methods:{\n\t\n  }\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped lang=\"scss\">\n@import \"../../assets/style/global_var.scss\";\n\t.OceanItem{\n\t\tfont-size: $button_size;\n\t\tcolor:white;\n\t\tposition: absolute;\n\t\tcursor:pointer;\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\n\t\topacity: 1;\n\n\t\tspan{\n\t\t\t// top: 50%;\n\t\t\t// left: 50%;\n\t\t\ttransform: translate(-50%, -50%);\n\t\t}\n\t}\n\t// .ocean_item-enter-active,.ocean_item-leave-active{\n\t// \ttransition:all $item_transition_time ease;\n\t// }\n\t// .ocean_item-enter,.ocean_item-leave-to{\n\t// \topacity: 0;\n\t// }\n\t// .ocean_item-enter-to,.ocean_item.leave{\n\t// \topacity: 1;\n\t// }\n\n\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OceanItem.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OceanItem.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./OceanItem.vue?vue&type=template&id=bdbf17ea&scoped=true&\"\nimport script from \"./OceanItem.vue?vue&type=script&lang=js&\"\nexport * from \"./OceanItem.vue?vue&type=script&lang=js&\"\nimport style0 from \"./OceanItem.vue?vue&type=style&index=0&id=bdbf17ea&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"bdbf17ea\",\n  null\n  \n)\n\nexport default component.exports","<template>\n<div id=\"_map\" class=\"CenterWrapper\" ref=\"_map\">\n      <!-- <div class=\"HintRegion\" id=\"_map_hint\">\n\t\t<div><br>\n\t\t\t</div>\n      </div> -->\n\t\t<WaveCanvas id=\"hint2\" img_src=\"img/hint-2.png\" :ratio=\"0.3\" class=\"HintRegion\"></WaveCanvas> \n\t\t<!-- <transition-group\n\t\t\tname=\"ocean-item-list\"\n\t\t\ttag=\"div\"\n\t\t\tid=\"_map_wrapper\"\n\t\t\tv-bind:css=\"false\"\n\t\t\tv-on:before-enter=\"beforeEnter\"\n\t\t\tv-on:enter=\"enter\"\n\t\t\tv-on:leave=\"leave\"> -->\n\t\t\t<ocean-item\n\t\t\t\tv-for=\"item in ocean\"\n\t\t\t\tv-bind:ocean=\"item\"\n\t\t\t\tv-bind:key=\"item.name\"\n\t\t\t\tv-on:click.native=\"writePoem(item.index,item.name)\"\n\t\t\t></ocean-item>\n\t\t<!-- </transition-group> -->\n</div>\n</template>\n\n<script>\nimport WaveCanvas from \"../wavecanvas/WaveCurtain.vue\";\nimport Vue from 'vue';\nimport OceanItem from '../ocean/OceanItem.vue';\nimport axios from 'axios';\nimport VueAxios from 'vue-axios';\nVue.use(VueAxios,axios);\n\n// import gsap from 'gsap';\n// import {MOVE_INTERVAL} from '../ocean/OceanSpot.js';\n\nconst CWBDataURL='https://opendata.cwb.gov.tw/fileapi/v1/opendataapi/F-A0012-001?Authorization=CWB-7021ACD5-3924-4A8B-8C5F-58BF57C9F18B&downloadType=WEB&format=JSON';\n\nconst ElementName={ \n  'Wx':'',\n  'WindDir':'',\n  'WindSpeed':'',\n  'WaveHeight':'',\n  'WaveType':''\n};\n\nexport default{\n\tdata(){\n\t\treturn{\n\t\t\tocean_list:[],\n\t\t\tshow:false,\t\t\n\t\t}\n\t},\n\tcomputed:{\n\t\tocean(){\n\t\t\t// console.log('get island!');\n\t\t\treturn this.$store.state.ocean;\n\t\t}\n\t},\n\tcomponents:{\n\t\tOceanItem,\n\t\tWaveCanvas,\n\t},\n\tmethods:{\n\t\twritePoem:function(index,name){\n\n\t\t\tvar item;\n\t\t\tfor(var k in this.ocean_list){\n\t\t\t\tif(this.ocean_list[k].locationName===name){\n\t\t\t\t\titem=this.ocean_list[k];\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(!item){\n\t\t\t\tconsole.log('err location: '+name);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif(!this.$parent.sound_processing.playing()) this.$parent.sound_processing.play();\n\n\t\t\tlet self=this;\n\t\t\tself.poem='waiting...'\n\n\t\t\tconsole.log('write a poem for '+item.locationName);\n\t\t\tthis.$store.commit({type:'setLocation',loc:item.locationName});\n\n\t\t\tvar text=[];\n\t\t\tfor(var i in item.weatherElement){\n\t\t\t\tvar el=item.weatherElement[i];\n\t\t\t\tvar str_=ElementName[el['elementName']]+el['time'][0]['parameter']['parameterName'];\n\t\t\t\ttext.push(str_);\n\t\t\t}\n\t\t\tconsole.log(text);\n\t\t\tthis.$store.commit('setWeatherText',text);\n\t\t\tthis.$store.dispatch('generatePoem');\n\n\t\t\tself.$router.push({\n\t\t\t\tname:'poem',\n\t\t\t\tparams:{\n\t\t\t\t\ttext:text\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.$parent.setStage('poem',parseInt(index));\n\n\t\t\tif(!this.$parent.sound_bgm.playing()) this.$parent.sound_bgm.play();\n\t\t\t\n\t\t},\n\t\tbeforeEnter: function (el) {\n\t\t\tel.style.opacity = 0\n\t\t\tel.style.height = 0\n\t\t},\n\t\tenter: function (el, done) {\n\t\t\t// console.log('enter !');\n\t\t\t// var delay = el.dataset.index;\n\t\t\t// gsap.from(el,{\n\t\t\t// \topacity: 0,\n\t\t\t// \tdelay:delay,\n\t\t\t// \tonComplete:done,\n\t\t\t// });\n\t\t\tel;\n\t\t\tdone;\n\t\t},\n\t\tleave: function (el, done) {\n\t\t\tel;\n\t\t\tdone;\n\t\t\t// console.log('leave !');\n\t\t\t// var delay = el.dataset.index;\n\t\t\t// gsap.to(el,{\n\t\t\t// \topacity: 0,\n\t\t\t// \tdelay:delay,\n\t\t\t// \tonComplete:done,\n\t\t\t// });\n\t\t},\n\t},\n\tcreated:function(){\n\t\tconsole.log('map created');\n\t\t\t\n\t\t// if(this.ocean_list.length<1){\n\t\t\tlet self=this;\n\t\t\tVue.axios.get(CWBDataURL).then(response=>{\n\t\t\t\tvar location=response.data.cwbopendata.dataset.location;\n\t\t\t\tself.ocean_list=location;     \n\t\t\t});   \t\t\n\t\t// }\n\t},\n\tmounted:function(){\n\t\tthis.$store.dispatch('computePageSize');\n\t\tthis.$parent.$refs._ocean_canvas.resize();\n\t},\n\tactivated:function(){\n\t\t\n\t\tconsole.log('page map activated!');\n\n\t\tthis.$parent.setStage('island');\t\t\n\n\t\t\t\n\t\t// this.$store.dispatch('computePageSize');\t\n\t\t// this.$parent.$refs._ocean_canvas.resize();\n\t\t// let self=this;\n\t\t// setTimeout(function(){\n\t\t// \tself.show=true;\n\t\t// },1000);\n\n\t\t// gsap.from('#hint2_curtain',{\n\t\t// \topacity:MOVE_INTERVAL/1000,\n\t\t// \trepeat:0,\n\t\t// });\t\t\n\t\t\n\t\t// gsap.from('.OceanItem',{\n\t\t// \topacity:0,\n\t\t// \tstagger:0.1,\n\t\t// \tdelay:MOVE_INTERVAL/1000*1.2,\n\t\t// \trepeat:0,\n\t\t// });\t\t\n    },\n\tdeactivated:function(){\n\n\t\tconsole.log('page map deactivated!');\n\t\t// this.show=false;\n\t// \tgsap.to('#hint2_curtain',{\n\t// \t\topacity:0,\n\t// \t\tdelay:0,\n\t// \t\trepeat:0,\n\t// \t});\t\t\n\t\t\n\t// \tgsap.to('.OceanItem',{\n\t// \t\topacity:0,\n\t// \t\tstagger:0.1,\n\t// \t\tdelay:MOVE_INTERVAL/1000*0.2,\n\t// \t\trepeat:0,\n\t// \t});\t\t\n    }\n\n\n}\n\n\n</script>\n<style scoped lang=\"scss\">\n@import \"../../assets/style/common.scss\";\n#_map_hint{\n\tmargin-top:$margin-size;\n}\n#_map{\n\talign-items:flex-start;\n}\n#_map_wrapper{\n\tposition: absolute;\n\tleft:0;\n\ttop:0;\n\twidth: 100%;\n\theight: 100%;\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./map.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./map.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./map.vue?vue&type=template&id=9c30806c&scoped=true&\"\nimport script from \"./map.vue?vue&type=script&lang=js&\"\nexport * from \"./map.vue?vue&type=script&lang=js&\"\nimport style0 from \"./map.vue?vue&type=style&index=0&id=9c30806c&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"9c30806c\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(_vm.show_button)?_c('div',{staticClass:\"ButtonRegion\"},[_c('div',{staticClass:\"Button\",on:{\"click\":_vm.rewriteClick}},[_c('WaveCanvas',{attrs:{\"id\":\"hint3\",\"img_src\":\"img/hint-3.png\",\"ratio\":0.42}})],1),_c('div',{staticClass:\"Button\",on:{\"click\":_vm.homeClick}},[_c('WaveCanvas',{attrs:{\"id\":\"hint4\",\"img_src\":\"img/hint-4.png\",\"ratio\":0.42}})],1)]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div>\n\t\t<div class=\"ButtonRegion\" v-if=\"show_button\">\n\t\t\t<div class=\"Button\" @click=\"rewriteClick\">\n\t\t\t\t<WaveCanvas id=\"hint3\" img_src=\"img/hint-3.png\" :ratio=\"0.42\" ></WaveCanvas>\n\t\t\t</div>\n\t\t\t<div class=\"Button\" @click=\"homeClick\">\n\t\t\t\t<WaveCanvas id=\"hint4\" img_src=\"img/hint-4.png\" :ratio=\"0.42\"></WaveCanvas>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport WaveCanvas from \"../wavecanvas/WaveCurtain.vue\";\n// import PoemItem from '../poem/PoemItem.vue';\n// import gsap from 'gsap';\n\nexport default{\t\t\n\tdata:function(){\n\t\treturn{\n\t\t\tshow_button:new Date().toLocaleString()\n\t\t}\n\t},\n\tcomponents:{\n\t\t// PoemItem,\n\t\tWaveCanvas,\n\t},\n\twatch:{\n\t\t'$store.state.generating':function(val){\n\t\t\tif(!val){\n\t\t\t\tthis.startPoem();\n\t\t\t}\n\t\t},\n\t},\n\tcomputed:{\n\t\tdate_str:function(){\n\t\t\tvar today=new Date();\n\t\t\tvar m=today.getMonth();\n\t\t\tvar d=today.getDate();\n\n\t\t\t// var hh=today.getHour();\n\t\t\t// var mm=today.getMiniute();\n\t\t\t// var ss=today.getSecond();\n\n\t\t\treturn today.getFullYear()+'/'+this.pad(m,2)+'/'+this.pad(d,2);\n\t\t},\n\t\tlocation:function(){\n\t\t\treturn this.$store.state.location;\n\t\t},\n\t\tpoem:function(){\n\t\t\treturn this.$store.state.poem;\t\t\t\n\t\t},\n\t\tgenerating:function(){\n\t\t\treturn this.$store.state.generating;\n\t\t}\n\t},\n\tmethods:{\n\t\trewriteClick:function(){\t\n\n\t\t\tthis.show_button=false;\n\t\t\t\n\t\t\tthis.$parent.$refs._poem_canvas.clear();\n\t\t\tthis.$parent.$refs._poem_canvas.resetChar();\n\t\t\t\n\t\t\tif(!this.$parent.sound_processing.playing()) this.$parent.sound_processing.play();\n\t\t\tthis.$store.dispatch('generatePoem');\t\t\t\n\n\t\t\tif(!this.$parent.sound_bgm.playing()) this.$parent.sound_bgm.play();\n\t\t\t\n\t\t},\n\t\thomeClick:function(){\n\n\t\t\tif(!this.$parent.sound_bgm.playing()) this.$parent.sound_bgm.play();\n\t\t\tthis.$router.push({name:'home'});\n\t\t},\n\t\tpad:function(n,width,z){\n\t\t\tz = z || '0';\n\t\t\tn = n + '';\n\t\t\treturn n.length >= width ? n : new Array(width - n.length + 1).join(z) + n;\n\t\t},\n\t\tstartPoem:function(){\n\t\t\t\n\t\t\tthis.show_button=false;\n\t\t\tvar delay1_,delay2_;\n\t\t\t[delay1_,delay2_]=this.$parent.$refs['_poem_canvas'].addWeather(this.poem,this.location,this.date_str);\n\t\t\tthis.$parent.sound_processing.stop();\n\n\t\t\tthis.$parent.sound_finish.play();\n\n\t\t\tlet sound=this.$parent.sound_fadein;\n\t\t\tsetTimeout(function(){\n\t\t\t\tsound.play();\n\t\t\t},delay1_);\n\n\t\t\t// let show=this.show_button;\n\t\t\tsetTimeout(()=>this.show_button=true,delay2_);\n\n\n\t\t},\n\t},\n\tcreated:function(){\n\n\t\t// TODO: check autoback!\n\t\t\n\t\t// if(!this.$store.state.generating){\n\t\t// \tthis.$router.push({name:'home'});\n\t\t// \treturn;\n\t\t// }\n\t\t// this.poem=this.text.join('\\n');\n\t\t//this.generatePoem();\n\t},\n\tactivated:function(){\n\t\tthis.show_button=false;\n\t\t//this.$parent.$refs['_poem_canvas'].addWeather(this.poem);\n\t},\n\tupdated(){\n\t\tconsole.log('poem view updated!');\n\t\t// gsap.from('.PoemItem',{\n\t\t// \topacity:0,\n\t\t// \tstagger:0.1\n\t\t// });\n\t}\n}\n\n</script>\n\n<style scoped lang=\"scss\">\n@import \"../../assets/style/global_var.scss\";\n\n#_poem{\n\tmargin-top:$margin-size;\n\t.PoemRegion{\n\t\t\n\t}\t\n}\n.TitleRegion{\n\tposition: absolute;\n\tright:$margin-size;\n\tbottom:$margin-size*5;\n\ttext-align: right;\n\n\tcolor:$poem-color;\n\tfont-size:$poem-title-size;\t\t\n}\t\n.ButtonRegion{\n\tposition: absolute;\n\tbottom:$margin-size;\n\tleft:$margin-size;\n\t// right:$margin-size;\n\twidth:50%;\n\t.Button{\n\t\tdisplay:inline-block;\n\t\tcolor:$button-color;\n\t\tfont-size:$hint-size;\n\n\t\tmargin-left:$margin-size/2;\n\t\tmargin-right:$margin-size/2;\n\n\t\t$all_pad:$margin-size*2;\n\t\twidth: calc((100% - #{$all_pad})/2);\n\t}\n}\n\n\n\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./poem.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./poem.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./poem.vue?vue&type=template&id=d52683a0&scoped=true&\"\nimport script from \"./poem.vue?vue&type=script&lang=js&\"\nexport * from \"./poem.vue?vue&type=script&lang=js&\"\nimport style0 from \"./poem.vue?vue&type=style&index=0&id=d52683a0&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"d52683a0\",\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue';\nimport VueRouter from 'vue-router';\nimport Home from '@/components/page/home';\nimport Map from '@/components/page/map';\nimport Poem from '@/components/page/poem';\n// import OceanCanvas from './components/OceanCanvas.vue';\nVue.use(VueRouter);\n\nconst router=new VueRouter({\n  routes:[\n    {\n\t\tname:'home',\n\t\tpath:'/',\n\t\tcomponent:Home\n    },\n    {\n\t\tname:'map',\n\t\tpath:'/map',\n\t\tcomponent:Map\n    },\n    {\n\t\tname:'poem',\n\t\tpath:'/poem',\n\t\tcomponent:Poem,\n\t\tprops:true\n    }\n  ]\n});\nexport default router;","import Vue from 'vue';\nimport Vuex from 'vuex';\nimport axios from 'axios';\nimport VueAxios from 'vue-axios';\nimport {IslandPortion} from './components/ocean/OceanShader.js';\n\nconst PoemURL=\"https://mmlab.tw/muse/sea\";\nconst IslandDataURL=\"./data/ocean_data.json\";\nconst DummyCharURL=\"./data/dummy_char.txt\";\n\nconst PagePadding=.5;\n\nVue.use(Vuex);\nVue.use(VueAxios,axios);\n\n\nfunction shuffleArray(array) {\n\tfor (let i = array.length - 1; i > 0; i--) {\n\t\tconst j = Math.floor(Math.random() * (i + 1));\n\t\t[array[i], array[j]] = [array[j], array[i]];\n\t}\n}\n// export const IslandPortion=.35;\n\nconst store=new Vuex.Store({\n\tstate:{\n\t\tlocation:'',\n\t\tpoem:[],\n\t\tgenerating:true,\n\t\tocean:[],\n\t\tisland:[],\n\t\tscreenWidth:document.documentElement.clientWidth,\n\t\tscreenHeight:document.documentElement.clientHeight,\n\t\tpageWidth:0,//Math.min(document.documentElement.clientWidth,document.documentElement.clientHeight*0.625)*(1-PagePadding/100*2),\n\t\tpageHeight:0,//document.documentElement.clientHeight*(1-PagePadding/100*2),\n\t\tmaskRegion:{},\n\t\tpagePadding:PagePadding,\n\t\tdummyChar:[],\n\t},\n\tmutations:{\n\t\tsetWeatherText(state,set){\n\t\t\tstate.poem=[];\n\t\t\tfor(var i in set){\n\t\t\t\tstate.poem.push({\n\t\t\t\t\ttext:set[i]\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tsetLocation(state,data){\n\t\t\tstate.location=data.loc;\n\t\t},\n\t\tsetPoem(state,set){\n\n\t\t\tfor(var i in state.poem){\n\n\t\t\t\tvar str_=set[i].replace(state.poem[i].text,'');\n\n\t\t\t\tvar concat=(str_[0]!=='\\n');\n\t\t\t\t// console.log('concat= '+concat);\n\n\t\t\t\tvar poem_=str_.split('\\n');\n\t\t\t\tpoem_=poem_.filter(el=>el.length>0);\n\t\t\t\t\n\t\t\t\tvar tmp_={\n\t\t\t\t\ttext:state.poem[i].text,\n\t\t\t\t\tpoem:poem_,\n\t\t\t\t\tconcat:concat,\n\t\t\t\t};\n\t\t\t\tstate.poem.splice(i,1,tmp_);\n\t\t\t}\n\n\t\t\t// console.log(this.state.poem);\n\t\t},\n\t\tsetGenerating(state,set){\n\t\t\tstate.generating=set;\t\t\t\n\t\t},\n\t\tclearPoem(state){\n\t\t\tfor(var i in state.poem){\n\t\t\t\tvar tmp_={\n\t\t\t\t\ttext:state.poem[i].text\n\t\t\t\t};\n\t\t\t\tstate.poem.splice(i,1,tmp_);\n\t\t\t}\n\t\t},\n\t\tsetOceanData(state,info){\n\t\t\tstate.ocean=info;\n\t\t},\n\t\tsetIslandData(state,data){\n\t\t\tstate.island=data;\n\t\t},\n\t\tsetDummyChar(state,data){\n\t\t\tstate.dummyChar=data;\n\t\t},\n\t\tsetPageSize(state){\n\n\t\t\tstate.screenWidth=document.documentElement.clientWidth;\n\t\t\tstate.screenHeight=document.documentElement.clientHeight;\n\n\t\t\t// let padding=PagePadding/100*state.screenWidth;\n\t\t\tlet p=document.getElementsByClassName('MainPage')[0];\n\t\t\t// console.log(p.clientWidth+' , '+p.clientHeight);\n\t\t\t\n\t\t\tstate.pageWidth=p.clientWidth;//*(1-PagePadding/100*2);\n\t\t\t// let padding=PagePadding/100*state.pageWidth;\n\n\t\t\t// state.pageWidth-=padding*2;\n\t\t\t\n\t\t\tstate.pageHeight=p.clientHeight;//*(1-PagePadding/100*2);\n\n\t\t\t// state.pageWidth=document.getElementById('_map').clientWidth;\n\t\t\t// state.pageHeight=document.getElementById('_map').clientHeight;\n\t\t\t\n\t\t\tconsole.log(state.pageWidth+' , '+state.pageHeight);\n\n\t\t\tlet mw=Math.min(state.pageWidth/0.8,state.pageHeight*IslandPortion);\n\n\t\t\tlet mx=state.screenWidth/2-mw/2;\n\t\t\tlet my=state.screenHeight/2-state.pageHeight/2+state.pageHeight*.2;//-mw;\n\t\t\t\n\t\t\t// console.log(mx+\" \"+my+\" \"+mw);\n\n\t\t\tstate.maskRegion={\n\t\t\t\tx:mx,\n\t\t\t\ty:my,\n\t\t\t\tw:mw,\n\t\t\t};\n\t\t},\n\t},\n\tactions:{\n\t\tgeneratePoem:function({commit}){\n\t\t\t\n\t\t\tcommit('setGenerating',true);\n\t\t\tcommit('clearPoem');\n\n\t\t\tvar weather_text=[];\n\t\t\tfor(var i in this.state.poem){\n\t\t\t\tweather_text.push(this.state.poem[i].text);\n\t\t\t}\n\n\t\t\tVue.axios.post(PoemURL,weather_text)\n\t\t\t.then(res=>{\n\n\t\t\t\t// console.log('res=> ',res);\n\t\t\t\tvar poem_=res.data.split('#');\n\n\t\t\t\tcommit('setPoem',poem_);\t\t\t\t\n\t\t\t\tcommit('setGenerating',false);\n\t\t\t\n\t\t\t}).catch(error=>{\n\t\t\t\tconsole.log(error);\n\t\t\t\t// commit('setGenerating',false);\n\n\t\t\t\tvar poem_=[];\n\t\t\t\tfor(var i=0;i<this.state.poem.length;++i) poem_.push(\"############\");\n\t\t\t\tcommit('setPoem',poem_);\t\t\t\t\n\t\t\t\tcommit('setGenerating',false);\n\t\t\t\n\t\t\t});\n\n\t\t},\n\t\tfetchIslandData:function({commit}){\n\t\t\tVue.axios.get(IslandDataURL).then(res=>{\n\n\t\t\t\tvar data=[];\n\t\t\t\t// var w=res.data.main.w;\n\t\t\t\tvar h=res.data.main.h/2;\n\t\t\t\tfor(var i in res.data.ocean){\n\t\t\t\t\tlet ocean=res.data.ocean[i];\n\t\t\t\t\tocean.x/=h;\n\t\t\t\t\tocean.y/=h;\n\t\t\t\t\tocean.w/=h;\n\t\t\t\t\tocean.h/=h;\n\t\t\t\t\tocean.index=i;\n\t\t\t\t\tdata.push(ocean);\n\t\t\t\t}\n\n\t\t\t\tvar island=[];\n\t\t\t\tfor(i in res.data.island){\n\t\t\t\t\tlet t=res.data.island[i];\n\t\t\t\t\tt.x/=h;\n\t\t\t\t\tt.y/=h;\n\t\t\t\t\tt.w/=h;\n\t\t\t\t\tt.h/=h;\n\t\t\t\t\tt.index=i;\n\t\t\t\t\tt.r/=h;\n\t\t\t\t\tisland.push(t);\n\t\t\t\t}\t\t\t\t\n\n\t\t\t\tcommit('setOceanData',data);\n\t\t\t\tcommit('setIslandData',island);\n\t\t\t\tconsole.log('load ocean data!');\n\t\t\t}).catch(err=>{\n\t\t\t\tconsole.log(err);\n\t\t\t});\t\t\t\n\t\t},\n\t\tfetchDummyChar:function({commit}){\n\t\t\tVue.axios.get(DummyCharURL).then(res=>{\n\n\n\t\t\t\tvar data=res.data.split('');\n\t\t\t\tshuffleArray(data);\n\t\t\t\t// console.log(data);\n\t\t\t\tcommit('setDummyChar',data);\n\t\t\t\tconsole.log('load dummyChars!');\n\t\t\t}).catch(err=>{\n\t\t\t\tconsole.log(err);\n\t\t\t});\t\t\t\n\t\t},\n\t\tcomputePageSize:function({commit}){\n\t\t\tcommit('setPageSize');\n\t\t}\n\t},\n\tgetters:{\n\t\tgetWeatherText:function(state){\n\t\t\treturn state.weather_text;\n\t\t},\n\t\tgetPoem:function(state){\n\t\t\treturn state.poem;\n\t\t},\n\t\tgetOceanPosition:(state)=>(index)=>{\n\t\t\t// var w=state.screenWidth;\n\t\t\t// var h=state.pageHeight;\n\t\t\tvar px=state.maskRegion.x-(state.screenWidth-state.pageWidth)/2;\n\t\t\tvar py=state.maskRegion.y-(state.screenHeight-state.pageHeight)/2;\n\n\t\t\t// var ratw=h*0.625; //10:16\n\t\t\tvar rad=state.maskRegion.w/2;\n\t\t\treturn{\n\t\t\t\tx:(px+rad+state.ocean[index].x*rad),\n\t\t\t\ty:(py+rad+state.ocean[index].y*rad)\n\t\t\t}\n\t\t\t// return{\n\t\t\t// \tx:(.5+state.ocean[index].x),\n\t\t\t// \ty:(py+IslandCenter+state.ocean[index].y)*100\n\t\t\t// }\n\t\t},\n\t\tgetOceanPositionCanvas:(state)=>(index)=>{\n\t\t\t// var w=state.screenWidth;\n\t\t\t// var h=state.pageHeight;\n\t\t\t// var py=(state.screenHeight-state.pageHeight)/2;\n\n\t\t\t// console.log('pageHeight= '+state.pageHeight);\n\n\t\t\t// var ratw=h*0.625;\n\t\t\tvar rad=state.maskRegion.w/2;\n\t\t\treturn{\n\t\t\t\tx:(state.maskRegion.x+rad+state.ocean[index].x*rad),\n\t\t\t\ty:(state.maskRegion.y+rad+state.ocean[index].y*rad)\n\t\t\t}\n\t\t},\n\t\tgetIslandPositionCanvas:(state)=>(index)=>{\n\n\t\t\tif(index<0 || index>=state.island.length){\n\t\t\t\treturn {x:0,y:0,r:0};\n\t\t\t}\n\t\t\t// var w=state.screenWidth;\n\t\t\t// var h=state.pageHeight;\n\t\t\t// var py=(state.screenHeight-state.pageHeight)/2;\n\n\t\t\t// var ratw=h*0.625;\n\t\t\t// var rad=h*IslandPortion;\n\t\t\tvar rad=state.maskRegion.w/2;\n\t\t\treturn{\n\t\t\t\tx:(state.maskRegion.x+rad+state.island[index].x*rad),\n\t\t\t\ty:(state.maskRegion.y+rad+state.island[index].y*rad),\n\t\t\t\tr:state.island[index].r,\n\t\t\t}\n\t\t},\n\t\tgetDummyChar:(state)=>(index)=>{\n\t\t\tlet t=state.dummyChar[index%state.dummyChar.length];\n\t\t\t// console.log(t);\n\t\t\treturn t;\n\t\t},\n\t\tgetMaskRegion:function(state){\n\t\t\treturn state.maskRegion;\n\t\t},\n\t}\n\n});\n\nexport default store;","import Vue from 'vue';\nimport App from './App.vue';\nVue.config.productionTip = false;\n\nimport router from './router';\nimport store from './store';\n\nvar resize_timeout;\n\nnew Vue({\n  render: h => h(App),\n  router,\n  store,\n  mounted(){\n\tvar _this = this;\n\twindow.onresize=function(){\n\t\tclearTimeout(resize_timeout);\n\t\tresize_timeout=setTimeout(_this.doResize,500);\n\t};\n\tthis.doResize();\n  },\n  created(){\n\t// this.doResize();\n  },\n  methods:{\n\tdoResize:function(){\n\t\tconsole.log('resize!');\n\t\t\n\t\t// this.$store.state.screenWidth = document.documentElement.clientWidth;\n\t\t// this.$store.state.screenHeight = document.documentElement.clientHeight;\n\t\t// this.$store.state.pageWidth=this.$refs._map.clientWidth;\n\t\t// this.$store.state.pageHeight=this.$refs._map.clientHeight;\n\n\t\tthis.$store.dispatch('computePageSize');\n\n\t\t\n\t}\n  }\n\n}).$mount('#app')\n\n","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=scss&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WaveCurtain.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WaveCurtain.vue?vue&type=style&index=0&lang=scss&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PoemCanvas.vue?vue&type=style&index=0&id=2bb5959a&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PoemCanvas.vue?vue&type=style&index=0&id=2bb5959a&lang=scss&scoped=true&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OceanItem.vue?vue&type=style&index=0&id=bdbf17ea&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OceanItem.vue?vue&type=style&index=0&id=bdbf17ea&scoped=true&lang=scss&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./map.vue?vue&type=style&index=0&id=9c30806c&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./map.vue?vue&type=style&index=0&id=9c30806c&scoped=true&lang=scss&\""],"sourceRoot":""}